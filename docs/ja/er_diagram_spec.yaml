# ER図記述仕様書（YAML形式）
# validator_path: spec_validator.yaml
---
ドキュメント情報:
  タイトル: "ER図記述仕様 v1.0"
  バージョン: "1.0.0"
  作成日: "2025-04-22"
  作成者: "YASPECチーム"

概要:
  目的: "ER図（エンティティ・リレーションシップ図）をYAMLで記述するための標準仕様を定める"
  想定ユーザー: "データベース設計者、アプリケーション開発者"
  利用シーン: "データベース設計、設計書自動生成、スキーマ管理"

要件定義:
  機能要件:
    - エンティティ（テーブル）定義の記述
    - 属性（カラム）の型・主キー・外部キー・説明の記述
    - エンティティ間リレーションの明示
  非機能要件:
    - YAML形式での記述
    - Git/バージョン管理との親和性
  制約事項:
    - YAML記法に準拠すること

ER図記述ルール:
  エンティティ定義:
    - entities配列でエンティティを列挙する
    - 各エンティティはname, description, attributesを持つ
    - attributesはname, type, primary_key, foreign_key, description等を持つ
  リレーション定義:
    - relationships配列でリレーションを列挙する
    - 各リレーションはfrom, to, type, source_key, target_key, description等を持つ

YAML記述例:
  サンプル: |
    entities:
      - name: User
        description: ユーザー情報
        attributes:
          - name: id
            type: integer
            primary_key: true
            description: ユーザーID
          - name: name
            type: string
            description: ユーザー名
          - name: email
            type: string
            description: メールアドレス
      - name: Order
        description: 注文情報
        attributes:
          - name: id
            type: integer
            primary_key: true
            description: 注文ID
          - name: user_id
            type: integer
            foreign_key: User.id
            description: ユーザーID（外部キー）
          - name: total
            type: decimal
            description: 合計金額
    relationships:
      - name: user_orders
        from: User
        to: Order
        type: one_to_many
        source_key: id
        target_key: user_id
        description: ユーザーは複数の注文を持つ

フィールド定義:
  entities:
    - name: エンティティ名
    - description: エンティティの説明
    - attributes:
        - name: 属性名
        - type: データ型
        - primary_key: 主キーかどうか（boolean, 任意）
        - foreign_key: 外部キーの場合の参照先（Entity.Attribute, 任意）
        - description: 属性の説明
  relationships:
    - name: リレーション名（任意）
    - from: リレーション元エンティティ
    - to: リレーション先エンティティ
    - type: リレーションタイプ（one_to_one, one_to_many, many_to_many等）
    - source_key: 元エンティティのキー
    - target_key: 先エンティティのキー
    - description: リレーションの説明

命名規則:
  - 英小文字とハイフンを使用
  - 一貫性と説明性を重視
  - スペース・特殊文字を避ける

バージョン管理:
  - すべてのER図仕様はGitで管理
  - 変更時は明確なコミットメッセージを記載

レビュープロセス:
  - 作成→自動検証→ピアレビュー→フィードバック反映→最終承認

品質基準:
  - 情報の正確性
  - 用語の統一
  - 適切な図の利用
  - トレーサビリティの確保

備考:
  - 本仕様はYASPECプロジェクトの標準ガイドラインに準拠
  - 必要に応じて拡張可能
